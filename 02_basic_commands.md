# 第 2 章 『基本的なコマンド』

Linux を操作する上で、ファイルやディレクトリの操作は基本中の基本です。  
本章では以下の内容を学びます。

---

## 2-1 ファイルとディレクトリの参照

- Linux システムは多数のファイルとディレクトリで構成されている
- ファイルは文書や画像、プログラムなどのデータを保存する単位
- ディレクトリは複数のファイルや他のディレクトリをまとめるための入れ物
- ファイルやディレクトリの一覧表示には `ls` コマンドを使う

---

ファイルやディレクトリの操作は Linux を使う上での基礎であり、  
それらを正しく理解し操作できることが重要です。

---

## 2-2 ls コマンドによるファイルやディレクトリの参照

- **基本**  
  `ls [オプション] [ファイルまたはディレクトリ]`

  - 引数なし：カレントディレクトリの内容を表示
  - 引数あり：指定した場所の内容を表示

- **主なオプション**
  - `-a` : 隠しファイル（ドットファイル）も表示
  - `-l` : 詳細形式で表示
  - `-R` : 指定ディレクトリ以下を再帰的に表示

---

## 2-3 コマンドの構成要素

- **書式**  
  コマンドの利用方法を示す形式。`[]`で囲まれた部分は省略可能。
- **オプション**  
  動作を変更する指定。例：`-l`（短形式）、`--long`（長形式）など。
- **サブコマンド**  
  コマンド内でさらに動作を指定する命令。例：`systemctl start`
- **引数**  
  実行対象となるファイルやディレクトリ。省略できる場合とできない場合がある。

---

## 2-4 ls の応用

- **詳細表示**  
  `ls -l` でパーミッションや所有者、更新日時などを一覧表示。
- **隠しファイル表示**  
  `ls -a` または `ls -la` で「.」で始まる設定ファイルなども表示。

---

## 2-5 オプションの組み合わせとワイルドカード

- **オプションの同時指定**  
  複数のオプションはまとめて書いても別々に書いても同じ結果。順序も自由。  
  例：`ls -la`、`ls -al`、`ls -l -a` は同じ出力。  
  ※一部コマンド（例：`tar`）は順序や指定方法が決まっている場合あり。

- **ワイルドカードによる絞り込み**
  - `*`：0 文字以上に一致
  - `?`：任意の 1 文字に一致  
     例：
    - `/etc/*.conf` → `.conf`で終わる全ファイルを表示
    - `/etc/???.conf` → ファイル名が 3 文字＋`.conf`のものを表示  
      ー

---

## 2-6 ファイル内容の表示

- **cat コマンド**（conCATenate）  
  本来は複数ファイルを連結して出力するが、単一ファイルの内容表示にもよく使う。
  - 書式：`cat ファイル名`
  - `-n` オプション：行番号を付けて表示  
    例：
    - `cat ~/.bashrc` → ファイル内容をそのまま表示
    - `cat -n ~/.bashrc` → 行番号付きで表示

---

### 2-6-1 ページャを使ったファイル内容の表示（less コマンド）

cat コマンドでファイルの内容を表示すると、内容が多い場合スクロールで流れてしまいます。  
そこでページャ（ページ単位で表示しスクロール操作できる機能）を使います。代表的なコマンドが less です。

#### 書式

```bash
less [ファイル名]

| キー        | 動作                  |
|------------|-----------------------|
| スペース     | 次のページへ進む        |
| b          | 前のページへ戻る         |
| f          | 次の画面へ進む          |
| ↑ ↓        | 一行ずつ上下に移動       |
| /単語       | 単語を検索             |
| n          | 次の検索結果へジャンプ    |
| q          | lessを終了（Quit）      |

less /etc/services

```

---

### 2-7 空のファイルを作成する（touch コマンド）

`touch`コマンドは、存在しないファイル名を指定すると空のファイル（サイズ 0 バイト）を作成します。  
ファイルの更新日時を変更するコマンドですが、実習でテスト用ファイル作成に使います。

#### 書式

```bash
touch ファイル名

$ touch test
$ ls -l test
-rw-r--r--. 1 linuc linuc 0 8月18 10:41 test

```

---

### 2-8 ディレクトリの操作

ディレクトリの操作に使われる主なコマンドは以下です。

- `pwd`：現在の作業ディレクトリ（カレントディレクトリ）を表示する
- `cd`：作業ディレクトリを移動する
- `mkdir`：新しいディレクトリを作成する
- `rmdir`：空のディレクトリを削除する

---

### 2-8-1 カレントディレクトリの表示（pwd コマンド）

- `pwd`（Print Working Directory）コマンドは、現在作業中のディレクトリのパスを表示します。

```bash
$ pwd
/home/linuc

```

カレントディレクトリが/home/linuc であることがわかります。「/」はディレクトリの区切りを示す記号です。

---

## 2-8-2 ディレクトリの変更 (cd コマンド)

`cd` (Change Directory) コマンドで現在の作業ディレクトリを変更できます。  
引数に移動先ディレクトリを指定し、省略するとホームディレクトリに移動します。  
`cd -` は一つ前のディレクトリに戻ります。

例：

```bash
$ pwd
/home/linuc
$ cd /usr
$ pwd
/usr
$ cd
$ pwd
/home/linuc
$ cd -
$ pwd
/usr

```

間違えてディレクトリを変更したときに便利です。

---

## 2-8-3 ディレクトリの作成 (mkdir コマンド)

mkdir コマンドを実行すると、ディレクトリを作成できます。  
引数として作成するディレクトリ名を指定します。

### 書式

```bash
mkdir ディレクトリ名

```

### オプション

```bash

-p

```

指定されたディレクトリの上位ディレクトリも作成します。

以下の例では、ホームディレクトリにディレクトリ dir1 を作成し、
dir1 の下にディレクトリ dir2 を作成しますが、mkdir コマンドを 2 つに分けて実行しました。
これは、ディレクトリを作るときはその上位層ができていないと作成できないという制約があるためです。

```bash

$ cd
$ pwd
/home/linuc
$ mkdir dir1
$ mkdir dir1/dir2
$ ls -R dir1
dir1:
dir2

dir1/dir2:

```

mkdir コマンドに -p オプションを付けて実行すると次のように一度に実行できます。

```bash

$ mkdir dir3/dir4
mkdir: ディレクトリ `dir3/dir4` を作成できません: そのようなファイルやディレクトリはありません
$ mkdir -p dir3/dir4
$ ls -R dir3
dir3:
dir4

dir3/dir4:

```

ls コマンドに -R オプションを付けて実行すると、
指定したディレクトリ以下のすべてを再帰的に表示することができます。

---

## 2-8-4 ディレクトリの削除 (rmdir コマンド)

`rmdir` コマンドはディレクトリを削除するために使います。  
ディレクトリ内にファイルや他のディレクトリがある場合は削除できません。

### 書式

```bash

rmdir ディレクトリ名

-p

```

指定した階層までのディレクトリを一括で削除します。

以下の例では、dir1 ディレクトリの中に dir2 があり、dir1 を削除しようとしますが失敗します。
これは dir1/dir2 が空でないためです。

```bash

$ ls
dir1 ダウンロード デスクトップ ビデオ 画像
dir3 テンプレート ドキュメント 音楽 公開
$ ls -R dir1
dir1:
dir2
dir1/dir2:
$ rmdir dir1
rmdir: 'dir1' を削除できません: ディレクトリは空ではありません

```

rmdir -p コマンドを使うと、空のディレクトリ階層を一括で削除できます。

```bash

$ rmdir -p dir1/dir2
$ ls
dir3 テンプレート ドキュメント 音楽 公開 ダウンロード デスクトップ ビデオ 画像

```

dir2 と一緒に dir1 も削除されました。

---

## 2-8-5 rm -r コマンドによるディレクトリとファイルの一括削除

`rmdir -p` コマンドでは、ディレクトリ内にファイルがあると削除できません。  
ファイルを含めてディレクトリを一括で削除するには、`rm -r` コマンドを使用します。

---

以下の例では、`touch` コマンドで `dir3/dir4/test` という空ファイルを作成しています。

```bash
$ touch dir3/dir4/test
$ ls -R dir3
dir3:
dir4
dir3/dir4:
test

```

rmdir -p dir3/dir4 を実行すると、dir4 内にファイルがあるため削除できません。

```bash

$ rmdir -p dir3/dir4
rmdir: 'dir3/dir4' を削除できません: ディレクトリは空ではありません

```

そこで、rm -r dir3 を使うと、dir3 以下のファイル・ディレクトリをすべて一括で削除できます。

```bash

$ rm -r dir3
$ ls
テンプレート ドキュメント 音楽 公開 ダウンロード デスクトップ ビデオ 画像

```

---

## 2-9 特別なディレクトリとパスの指定

Linux では特別な意味を持つディレクトリや記号があり、パス（PATH）としてファイルやディレクトリの位置を指定します。

---

### 2-9-1 特別なディレクトリ

- **カレントディレクトリ (.)**  
  現在作業しているディレクトリ。`pwd` コマンドで確認可能。コマンド操作では「`.`」で表す。

- **親ディレクトリ (..)**  
  現在のディレクトリの 1 つ上の階層。たとえば、カレントディレクトリが `/home/linuc` の場合、親ディレクトリは `/home`。コマンド操作では「`..`」で表す。

- **ホームディレクトリ (~)**  
  各ユーザーの作業用ディレクトリ。通常 `/home` 以下にユーザーごとのディレクトリがある。ログイン時に最初のカレントディレクトリ。コマンド操作では「`~`」で表す。

- **ルートディレクトリ (/)**  
  ディレクトリ階層の最上位。コマンド操作では「`/`」で表す。

---

### 2-9-2 パスの絶対指定と相対指定

- **絶対指定**  
  ルートディレクトリ `/` から始まるパス。カレントディレクトリに関係なく指定可能。例: `/usr/bin`

- **相対指定**  
  カレントディレクトリからの相対的なパス。カレントディレクトリが変わると意味が変わる。例: `../../usr/bin`

---

### 2-9-3 例

```bash
$ cd ~
$ pwd
/home/linuc

$ cd ..
$ pwd
/home

$ cd /usr/bin
$ pwd
/usr/bin

$ cd ../../
$ pwd
/

```

---

## 2-10 ファイルのコピー (cp コマンド)

cp コマンドはファイルやディレクトリをコピーするためのコマンドです。
オプションや引数により様々なコピー操作が可能です。

---

### 2-10-1 基本書式

```bash

cp [オプション] コピー元 コピー先

```

-r ディレクトリを再帰的にコピーします。中のファイルやディレクトリもすべてコピーされます。

### 2-10-2 ファイルをディレクトリにコピー

コピー先にディレクトリを指定すると、その中にコピー元ファイルと同名でコピーされます。

```bash

$ cd ~
$ mkdir work
$ cp /etc/hosts /home/linuc/work
$ ls -l /etc/hosts
-rw-r--r--. 1 root root 158 6月23 2020 /etc/hosts
$ ls -l work

合計 4
-rw-r--r--. 1 linuc linuc 158 8月11 12:47 hosts

```

カレントディレクトリにコピーする場合はコピー先に「.」を指定します。

```bash

コピーする
編集する
$ cd work
$ pwd
/home/linuc/work
$ cp /etc/services .
$ ls -l /etc/services
-rw-r--r--. 1 root root 692252 6月23 2020 /etc/services
$ ls -l
合計 684
-rw-r--r--. 1 linuc linuc 158 8月11 12:47 hosts
-rw-r--r--. 1 linuc linuc 692252 8月11 12:48 services

```

### 2-10-3 ファイルを別名でコピー

コピー先に存在しないファイル名を指定すると、その名前でコピーされます。

```bash

$ cp /etc/services cptest
$ ls -l
合計 1364
-rw-r--r--. 1 linuc linuc 692252 8月11 12:49 cptest
-rw-r--r--. 1 linuc linuc 158 8月11 12:47 hosts
-rw-r--r--. 1 linuc linuc 692252 8月11 12:48 services

```

### 2-10-4 ファイルの上書きコピー

コピー先に同名のファイルがある場合、上書きされます。

```bash

$ cp /etc/hosts cptest
$ ls -l
合計 688
-rw-r--r--. 1 linuc linuc 158 8月11 12:50 cptest
-rw-r--r--. 1 linuc linuc 158 8月11 12:47 hosts
-rw-r--r--. 1 linuc linuc 692252 8月11 12:48 services

```

### 2-10-5 ディレクトリのコピー

-r オプションを付けてディレクトリを指定すると、ディレクトリ内の全ファイル・ディレクトリを再帰的にコピーします。

```bash

$ mkdir moto
$ touch moto/cptest
$ ls moto
cptest

$ cp -r moto saki
$ ls saki
cptest

```

コピー先のディレクトリ saki が無ければ新規作成され、その中にコピーされます。

```bash

$ mkdir aru
$ cp -r moto aru
$ ls -R aru
aru:
moto

aru/moto:
cptest

```

コピー先ディレクトリが存在する場合、その中にコピー元のディレクトリが作成されます。

コピー先の有無によってディレクトリ構造が変わるので注意が必要です。

---

## 2-11 ファイルとディレクトリの移動 (mv コマンド)

`mv` コマンドはファイルやディレクトリの移動だけでなく、名前の変更にも使えます。

---

### 書式

```bash

mv 移動元 移動先

```

### 2-11-1 ファイルを別のディレクトリに移動

```bash

$ touch moto/mvtest
$ ls moto
cptest mvtest
$ mv moto/mvtest saki
$ ls moto
cptest
$ ls saki
cptest mvtest

```

moto ディレクトリ内の mvtest ファイルが saki ディレクトリに移動したことが確認できます。

### 2-11-2 ディレクトリを別のディレクトリに移動

```bash

$ mv moto saki
$ ls saki
cptest moto mvtest

```
